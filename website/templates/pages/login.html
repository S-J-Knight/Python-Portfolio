    {% extends 'store/main.html' %}
{% load static %}

{% block content %}
<style>
	.login-container {
		max-width: 400px;
		margin: 60px auto;
		padding: 32px 28px;
		background: #fff;
		border-radius: 10px;
		box-shadow: 0 2px 16px rgba(0,32,16,0.10);
	}
	.login-container h2 {
		text-align: center;
		color: #116944;
		margin-bottom: 18px;
		font-weight: 700;
	}
	.login-container form {
		display: flex;
		flex-direction: column;
		gap: 14px;
	}
	.login-container input {
		padding: 10px;
		border: 1px solid #ccc;
		border-radius: 5px;
		font-size: 1rem;
	}
	.login-container button {
		background: #116944;
		color: #fff;
		border: none;
		border-radius: 5px;
		padding: 10px;
		font-size: 1rem;
		font-weight: 600;
		cursor: pointer;
		margin-top: 8px;
		transition: background 0.18s;
	}
	.login-container button:hover {
		background: #0d4c2f;
	}
	.login-container .switch-link {
		text-align: center;
		margin-top: 10px;
		color: #116944;
		font-size: 0.98rem;
	}
	.login-container .switch-link a {
		color: #116944;
		text-decoration: underline;
		cursor: pointer;
	}
</style>

<div class="login-container">
	<h2>Login</h2>
		<form method="post" action="{% url 'store:login' %}">
			{% csrf_token %}
			<input type="text" name="username" placeholder="Username" required>
			<input type="password" name="password" placeholder="Password" required>
			<button type="submit">Login</button>
			{% if error %}
				<div style="color:#b30000; margin-top:8px; text-align:center;">{{ error }}</div>
			{% endif %}
			{% if message %}
				<div style="color:#116944; margin-top:8px; text-align:center;">{{ message }}</div>
			{% endif %}
	</form>
	<div class="switch-link">
		Don't have an account? <a href="#" onclick="showRegister(event)">Register</a>
	</div>

		<div id="register-form" style="display:none; margin-top:24px;">
			<h2>Create Account</h2>
			<form method="post" action="{% url 'store:register' %}">
				{% csrf_token %}
				<input type="text" name="username" placeholder="Username" required>
				<input type="email" name="email" placeholder="Email" required>
				<input type="password" name="password1" placeholder="Password" required>
				<input type="password" name="password2" placeholder="Confirm Password" required>
				<button type="submit">Register</button>
				{% if error %}
					<div style="color:#b30000; margin-top:8px; text-align:center;">{{ error }}</div>
				{% endif %}
				{% if message %}
					<div style="color:#116944; margin-top:8px; text-align:center;">{{ message }}</div>
				{% endif %}
			</form>
			<div class="switch-link">
				Already have an account? <a href="#" onclick="showLogin(event)">Login</a>
			</div>
		</div>
</div>

<script>
function showRegister(e) {
	e.preventDefault();
	document.querySelector('.login-container form').style.display = 'none';
	document.querySelector('.login-container .switch-link').style.display = 'none';
	document.getElementById('register-form').style.display = 'block';
}
function showLogin(e) {
	e.preventDefault();
	document.querySelector('.login-container form').style.display = 'flex';
	document.querySelector('.login-container .switch-link').style.display = 'block';
	document.getElementById('register-form').style.display = 'none';
}
// Show register form if error from registration
window.onload = function() {
	{% if show_register %}
		showRegister({preventDefault:function(){}});
	{% endif %}
}
</script>
{% endblock %}
