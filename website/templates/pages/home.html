{% extends 'store/main.html' %}
{% load static %}
{% load markdownify %}

{% block content %}
<style>
  body {
    /* Darken the image using a gradient overlay + the image layer */
    background-image:
      linear-gradient(rgba(0, 20, 12, 0.55), rgba(0, 20, 12, 0.55)),
      url("{% static 'images/recycle.png' %}");
    background-size: cover;
    /* Move the background image down by 100px from center */
    background-position: center calc(68% + 120px);
    background-repeat: no-repeat;
  }
  .hero-headline {
    position: relative;
    z-index: 2;
    text-align: center;
    font-family: 'Montserrat', 'Open Sans', Arial, sans-serif;
    font-size: clamp(2.2rem, 5vw, 3.6rem);
    font-weight: 800;
    color: #fff;
    margin-top: 54px;
    margin-bottom: 18px;
    letter-spacing: -0.02em;
    text-shadow: 0 4px 32px rgba(0,32,16,0.72), 0 1px 2px rgba(0,0,0,0.22);
    line-height: 1.08;
  }
  .hero-overlay {
    /* Keep a soft top gradient; extend a bit and slightly darker */
    position: absolute;
    top: 0; left: 0; right: 0; height: 260px;
    background: linear-gradient(180deg, rgba(0,32,16,0.35), rgba(0,32,16,0.10) 80%);
    z-index: 1;
    pointer-events: none;
  }
  .coming-soon {
    position: relative;
    z-index: 2;
    text-align: center;
    font-family: 'Montserrat', 'Open Sans', Arial, sans-serif;
    font-size: clamp(2.5rem, 6vw, 4.5rem);
    font-weight: 900;
    color: #ff3b3b;
    margin-top: 120px;
    text-shadow: 0 4px 32px rgba(0,0,0,0.8), 0 2px 4px rgba(0,0,0,0.4);
    letter-spacing: 0.02em;
  }
  
  /* Stats Counter Section */
  .stats-container {
    position: relative;
    z-index: 2;
    display: flex;
    justify-content: center;
    gap: 60px;
    margin-top: 80px;
    flex-wrap: wrap;
    padding: 0 20px;
  }
  
  .stat-box {
    background: rgba(255, 255, 255, 0.95);
    border-radius: 12px;
    padding: 30px 50px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    text-align: center;
    min-width: 280px;
  }
  
  .stat-number {
    font-family: 'Montserrat', Arial, sans-serif;
    font-size: clamp(3rem, 5vw, 4.5rem);
    font-weight: 900;
    color: #116944;
    margin: 0;
    line-height: 1;
  }
  
  .stat-label {
    font-family: 'Open Sans', Arial, sans-serif;
    font-size: 1.1rem;
    font-weight: 600;
    color: #4a5568;
    margin-top: 12px;
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }
  
  .stat-sublabel {
    font-size: 0.9rem;
    color: #718096;
    margin-top: 4px;
  }
  
  .cta-btn {
    display: inline-block;
    background: #116944;
    color: #fff;
    border: 2px solid #fff;
    border-radius: 6px;
    font-size: 1.25rem;
    font-weight: 700;
    padding: 14px 36px;
    margin-top: 10px;
    text-decoration: none;
    box-shadow: 0 2px 12px rgba(0,32,16,0.12);
    transition: background 0.18s, color 0.18s, box-shadow 0.18s;
  }
  .cta-btn:hover, .cta-btn:focus {
    background: #0d4c2f;
    color: #fff;
    box-shadow: 0 4px 24px rgba(0,32,16,0.22);
    text-decoration: none;
  }
  
  /* Info Columns Section */
  .info-columns-section {
    position: relative;
    z-index: 2;
    margin-top: 100px;
    padding: 0 20px 80px;
  }
  
  .info-columns-container {
    max-width: 1200px;
    margin: 0 auto;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 40px;
  }
  
  .info-column {
    background: rgba(255, 255, 255, 0.97);
    border-radius: 16px;
    padding: 40px 35px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
  }
  
  .hobbyist-column {
    border-top: 5px solid #116944;
  }
  
  .commercial-column {
    border-top: 5px solid #0d5435;
  }
  
  .column-title {
    font-family: 'Montserrat', Arial, sans-serif;
    font-size: clamp(1.8rem, 3vw, 2.2rem);
    font-weight: 800;
    color: #116944;
    margin: 0 0 15px;
    text-align: center;
  }
  
  .column-intro {
    text-align: center;
    font-size: 1rem;
    color: #4a5568;
    margin-bottom: 30px;
    line-height: 1.5;
  }
  
  .column-content {
    margin-bottom: 30px;
  }
  
  .info-point {
    display: flex;
    align-items: flex-start;
    gap: 15px;
    margin-bottom: 25px;
  }
  
  .info-point:last-child {
    margin-bottom: 0;
  }
  
  .info-icon {
    font-size: 2rem;
    flex-shrink: 0;
    line-height: 1;
  }
  
  .info-point h3 {
    font-family: 'Montserrat', Arial, sans-serif;
    font-size: 1.1rem;
    font-weight: 700;
    color: #1a202c;
    margin: 0 0 5px;
  }
  
  .info-point p {
    font-size: 0.95rem;
    color: #4a5568;
    margin: 0;
    line-height: 1.5;
  }
  
  .column-cta {
    display: block;
    text-align: center;
    background: #116944;
    color: #fff;
    border-radius: 8px;
    font-size: 1.1rem;
    font-weight: 700;
    padding: 14px 28px;
    text-decoration: none;
    transition: background 0.2s, transform 0.2s, box-shadow 0.2s;
    box-shadow: 0 4px 16px rgba(17, 105, 68, 0.3);
  }
  
  .column-cta:hover, .column-cta:focus {
    background: #0d4c2f;
    color: #fff;
    transform: translateY(-2px);
    box-shadow: 0 6px 24px rgba(17, 105, 68, 0.4);
    text-decoration: none;
  }
  
  .column-cta-business {
    background: #0d5435;
  }
  
  .column-cta-business:hover, .column-cta-business:focus {
    background: #0a3d26;
  }
  
  /* Responsive Design */
  @media (max-width: 768px) {
    .info-columns-container {
      grid-template-columns: 1fr;
      gap: 30px;
    }
    
    .info-columns-section {
      margin-top: 60px;
      padding-bottom: 60px;
    }
  }
  
  /* Blog Preview Section */
  .blog-preview-section {
    position: relative;
    z-index: 2;
    background: rgba(255, 255, 255, 0.92);
    margin: 0 20px 60px;
    padding: 60px 40px;
    border-radius: 16px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
  }
  
  .blog-preview-container {
    max-width: 1200px;
    margin: 0 auto;
  }
  
  .blog-preview-title {
    font-family: 'Montserrat', Arial, sans-serif;
    font-size: clamp(2rem, 4vw, 2.5rem);
    font-weight: 800;
    color: #1a202c;
    text-align: center;
    margin: 0 0 10px;
  }
  
  .blog-preview-subtitle {
    text-align: center;
    font-size: 1rem;
    color: #718096;
    margin-bottom: 40px;
  }
  
  .blog-posts-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 30px;
    margin-bottom: 40px;
  }
  
  .blog-card {
    background: white;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    transition: transform 0.3s, box-shadow 0.3s;
    display: flex;
    flex-direction: column;
  }
  
  .blog-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
  }
  
  .blog-card-image {
    width: 100%;
    height: 200px;
    background-size: cover;
    background-position: center;
    background-color: #e2e8f0;
  }
  
  .blog-card-placeholder {
    background: linear-gradient(135deg, #116944 0%, #0d5435 100%);
    position: relative;
  }
  
  .blog-card-placeholder::after {
    content: 'üìù';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 3rem;
    opacity: 0.3;
  }
  
  .blog-card-content {
    padding: 25px;
    flex: 1;
    display: flex;
    flex-direction: column;
  }
  
  .blog-card-meta {
    display: flex;
    gap: 15px;
    font-size: 0.85rem;
    color: #718096;
    margin-bottom: 12px;
  }
  
  .blog-card-date {
    font-weight: 600;
  }
  
  .blog-card-title {
    font-family: 'Montserrat', Arial, sans-serif;
    font-size: 1.3rem;
    font-weight: 700;
    color: #1a202c;
    margin: 0 0 12px;
    line-height: 1.3;
  }
  
  .blog-card-excerpt {
    color: #4a5568;
    font-size: 0.95rem;
    line-height: 1.6;
    margin: 0 0 15px;
    flex: 1;
  }
  
  .blog-card-link {
    color: #116944;
    font-weight: 700;
    font-size: 0.95rem;
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    gap: 5px;
    transition: gap 0.2s;
  }
  
  .blog-card-link:hover {
    gap: 8px;
    text-decoration: none;
    color: #0d4c2f;
  }
  
  .blog-view-all {
    text-align: center;
  }
  
  .blog-view-all-btn {
    display: inline-block;
    background: #116944;
    color: #fff;
    border-radius: 8px;
    font-size: 1.1rem;
    font-weight: 700;
    padding: 14px 32px;
    text-decoration: none;
    transition: background 0.2s, transform 0.2s, box-shadow 0.2s;
    box-shadow: 0 4px 16px rgba(17, 105, 68, 0.3);
  }
  
  .blog-view-all-btn:hover {
    background: #0d4c2f;
    color: #fff;
    transform: translateY(-2px);
    box-shadow: 0 6px 24px rgba(17, 105, 68, 0.4);
    text-decoration: none;
  }
  
  @media (max-width: 768px) {
    .blog-preview-section {
      margin: 0 10px 40px;
      padding: 40px 20px;
    }
    
    .blog-posts-grid {
      grid-template-columns: 1fr;
    }
  }
  
  /* How It Works Section */
  .how-it-works-section {
    position: relative;
    z-index: 2;
    margin-top: 80px;
    padding: 0 20px;
  }
  
  .how-it-works-container {
    max-width: 1100px;
    margin: 0 auto;
    text-align: center;
  }
  
  .how-it-works-title {
    font-family: 'Montserrat', Arial, sans-serif;
    font-size: clamp(2rem, 4vw, 2.8rem);
    font-weight: 800;
    color: #fff;
    margin: 0 0 10px;
    text-shadow: 0 2px 12px rgba(0, 0, 0, 0.3);
  }
  
  .how-it-works-subtitle {
    font-size: 1.1rem;
    color: rgba(255, 255, 255, 0.9);
    margin-bottom: 50px;
    text-shadow: 0 1px 4px rgba(0, 0, 0, 0.2);
  }
  
  .how-steps {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 20px;
    flex-wrap: wrap;
  }
  
  .how-step {
    background: rgba(255, 255, 255, 0.95);
    border-radius: 16px;
    padding: 35px 25px;
    flex: 1;
    min-width: 220px;
    max-width: 280px;
    position: relative;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
    transition: transform 0.3s, box-shadow 0.3s;
  }
  
  .how-step:hover {
    transform: translateY(-5px);
    box-shadow: 0 12px 32px rgba(0, 0, 0, 0.2);
  }
  
  .how-step-icon {
    color: #116944;
    margin-bottom: 20px;
  }
  
  .how-step-number {
    position: absolute;
    top: -15px;
    left: 50%;
    transform: translateX(-50%);
    background: #116944;
    color: white;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 900;
    font-size: 1.3rem;
    box-shadow: 0 4px 12px rgba(17, 105, 68, 0.4);
  }
  
  .how-step-title {
    font-family: 'Montserrat', Arial, sans-serif;
    font-size: 1.5rem;
    font-weight: 700;
    color: #1a202c;
    margin: 0 0 12px;
  }
  
  .how-step-text {
    font-size: 0.95rem;
    color: #4a5568;
    line-height: 1.6;
    margin: 0;
  }
  
  .how-step-arrow {
    font-size: 2.5rem;
    color: rgba(255, 255, 255, 0.7);
    font-weight: 300;
    flex-shrink: 0;
  }
  
  @media (max-width: 768px) {
    .how-step-arrow {
      display: none;
    }
    
    .how-steps {
      flex-direction: column;
    }
    
    .how-step {
      max-width: 100%;
    }
  }
  
  /* Newsletter Section */
  .newsletter-section {
    position: relative;
    z-index: 2;
    margin: 80px 20px 0;
    background: linear-gradient(135deg, #116944 0%, #0d5435 100%);
    border-radius: 16px;
    padding: 50px 40px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
  }
  
  .newsletter-container {
    max-width: 800px;
    margin: 0 auto;
  }
  
  .newsletter-content {
    text-align: center;
  }
  
  .newsletter-title {
    font-family: 'Montserrat', Arial, sans-serif;
    font-size: clamp(1.8rem, 4vw, 2.5rem);
    font-weight: 800;
    color: #fff;
    margin: 0 0 12px;
  }
  
  .newsletter-subtitle {
    font-size: 1.05rem;
    color: rgba(255, 255, 255, 0.9);
    margin-bottom: 30px;
    line-height: 1.6;
  }
  
  .newsletter-form {
    max-width: 600px;
    margin: 0 auto;
  }
  
  .newsletter-inputs {
    display: flex;
    gap: 12px;
    flex-wrap: wrap;
  }
  
  .newsletter-input {
    flex: 1;
    min-width: 200px;
    padding: 14px 18px;
    border: 2px solid rgba(255, 255, 255, 0.3);
    border-radius: 8px;
    font-size: 1rem;
    background: rgba(255, 255, 255, 0.95);
    transition: border-color 0.2s, background 0.2s;
  }
  
  .newsletter-input:focus {
    outline: none;
    border-color: #fff;
    background: #fff;
  }
  
  .newsletter-input::placeholder {
    color: #718096;
  }
  
  .newsletter-btn {
    padding: 14px 32px;
    background: #fff;
    color: #116944;
    border: none;
    border-radius: 8px;
    font-size: 1rem;
    font-weight: 700;
    cursor: pointer;
    transition: transform 0.2s, box-shadow 0.2s;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
  }
  
  .newsletter-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
  }
  
  .newsletter-btn:active {
    transform: translateY(0);
  }
  
  .newsletter-message {
    margin-top: 20px;
    padding: 20px 30px;
    border-radius: 12px;
    font-size: 1.15rem;
    font-weight: 700;
    display: none;
    text-align: center;
    animation: successPop 0.5s ease-out;
  }
  
  @keyframes successPop {
    0% {
      opacity: 0;
      transform: scale(0.8) translateY(-20px);
    }
    50% {
      transform: scale(1.05) translateY(0);
    }
    100% {
      opacity: 1;
      transform: scale(1) translateY(0);
    }
  }
  
  .newsletter-message.success {
    background: #fff;
    color: #116944;
    display: block;
    border: 3px solid #fff;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3), 0 0 0 4px rgba(255, 255, 255, 0.3);
  }
  
  .newsletter-message.success::before {
    content: '‚úì';
    display: inline-block;
    width: 30px;
    height: 30px;
    line-height: 30px;
    background: #116944;
    color: white;
    border-radius: 50%;
    margin-right: 10px;
    font-weight: 900;
    font-size: 1.2rem;
  }
  
  .newsletter-message.error {
    background: #fff;
    color: #d63031;
    display: block;
    border: 3px solid #ff6b6b;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3), 0 0 0 4px rgba(255, 107, 107, 0.3);
  }
  
  .newsletter-message.error::before {
    content: '‚úó';
    display: inline-block;
    width: 30px;
    height: 30px;
    line-height: 30px;
    background: #d63031;
    color: white;
    border-radius: 50%;
    margin-right: 10px;
    font-weight: 900;
    font-size: 1.2rem;
  }
  
  @media (max-width: 768px) {
    .newsletter-section {
      margin: 60px 10px 0;
      padding: 40px 20px;
    }
    
    .newsletter-inputs {
      flex-direction: column;
    }
    
    .newsletter-input {
      min-width: 100%;
    }
    
    .newsletter-btn {
      width: 100%;
    }
  }
</style>

<div class="hero-overlay"></div>

<!-- Commented out for launch -->
<!-- <div class="hero-headline">It's time to do your part ‚Äî recycle your 3D printing waste</div>
<div style="text-align:center; margin-bottom:32px;">
  <a href="{% url 'send_waste' %}" class="cta-btn">Send your filament waste today</a>
</div> -->

<!-- Coming Soon Message -->
<div class="coming-soon">Filament Recycling Coming Soon</div>

<!-- What Can You Do To Help Section -->
<section class="how-it-works-section">
  <div class="how-it-works-container">
    <h2 class="how-it-works-title">What Can You Do <u>Right Now</u>?</h2>
    <p class="how-it-works-subtitle">Help turn 3D printing waste into recycled filament ‚Äî every action counts!</p>
    
    <div class="how-steps">
      <div class="how-step">
        <div class="how-step-icon">
          <svg viewBox="0 0 24 24" width="64" height="64" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M9 11l3 3L22 4"/>
            <path d="M21 12v7a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2h11"/>
          </svg>
        </div>
        <div class="how-step-number">1</div>
        <h3 class="how-step-title">Complete the Survey</h3>
        <p class="how-step-text">Every response helps validate demand and shape our service. Please be thorough ‚Äî this is crucial for getting us off the ground!</p>
        <a href="https://docs.google.com/forms/d/e/1FAIpQLSdmC1cS8YmhxF-h2sMV7RKfrzqSSkuAGC4RspVPJ_D6mWujIQ/viewform?usp=dialog" target="_blank" style="display: inline-block; margin-top: 15px; padding: 10px 20px; background: #116944; color: white; text-decoration: none; border-radius: 6px; font-weight: 600; transition: background 0.2s;">Take the Survey ‚Üí</a>
      </div>
      
      <div class="how-step-arrow">‚Üí</div>
      
      <div class="how-step">
        <div class="how-step-icon">
          <svg viewBox="0 0 24 24" width="64" height="64" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
            <polyline points="22,6 12,13 2,6"/>
          </svg>
        </div>
        <div class="how-step-number">2</div>
        <h3 class="how-step-title">Subscribe to Newsletter</h3>
        <p class="how-step-text">Get major updates delivered to your inbox. Be the first to know when we launch!</p>
        <a href="#newsletter-section" style="display: inline-block; margin-top: 15px; padding: 10px 20px; background: #116944; color: white; text-decoration: none; border-radius: 6px; font-weight: 600; transition: background 0.2s;" onclick="document.querySelector('.newsletter-section').scrollIntoView({behavior: 'smooth'}); return false;">Subscribe Below ‚Üì</a>
      </div>
      
      <div class="how-step-arrow">‚Üí</div>
      
      <div class="how-step">
        <div class="how-step-icon">
          <svg viewBox="0 0 24 24" width="64" height="64" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M17 3a2.828 2.828 0 114 4L7.5 20.5 2 22l1.5-5.5L17 3z"/>
          </svg>
        </div>
        <div class="how-step-number">3</div>
        <h3 class="how-step-title">Follow the Blog</h3>
        <p class="how-step-text">Frequent updates detailing the small steps toward launch. Stay in the loop!</p>
        <a href="{% url 'store:blog' %}" style="display: inline-block; margin-top: 15px; padding: 10px 20px; background: #116944; color: white; text-decoration: none; border-radius: 6px; font-weight: 600; transition: background 0.2s;">Read the Blog ‚Üí</a>
      </div>
      
      <div class="how-step-arrow">‚Üí</div>
      
      <div class="how-step">
        <div class="how-step-icon">
          <svg viewBox="0 0 24 24" width="64" height="64" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M17 11a3 3 0 100-6 3 3 0 000 6z"/>
            <path d="M21 21v-2a4 4 0 00-4-4h-2"/>
            <path d="M7 11a3 3 0 100-6 3 3 0 000 6z"/>
            <path d="M11 14H5a4 4 0 00-4 4v2"/>
          </svg>
        </div>
        <div class="how-step-number">4</div>
        <h3 class="how-step-title">Spread the Word</h3>
        <p class="how-step-text">Know anyone keen to recycle their 3D printing waste? Share KnightCycle with them!</p>
      </div>
    </div>
  </div>
</section>

<!-- The Aim Section -->
<section class="info-columns-section">
  <div class="info-columns-container">
    
    <!-- Section Header with matching "What Can You Do" style -->
    <div style="grid-column: 1 / -1; text-align: center; margin-bottom: 40px;">
      <h2 style="font-family: 'Montserrat', Arial, sans-serif; font-size: clamp(2rem, 4vw, 2.8rem); font-weight: 800; color: #fff; margin: 0 0 10px; text-shadow: 0 2px 12px rgba(0, 0, 0, 0.3);">The Aim</h2>
      <p style="font-size: 1.1rem; color: rgba(255, 255, 255, 0.9); max-width: 800px; margin: 0 auto; line-height: 1.6; text-shadow: 0 1px 4px rgba(0, 0, 0, 0.2);">
        Our goal is to <strong>turn your 3D printing waste back into usable filament</strong> ‚Äî closing the loop and making sustainable 3D printing accessible to everyone.
      </p>
    </div>
    
    <!-- Left Column: Hobbyist -->
    <div class="info-column hobbyist-column">
      <h2 class="column-title">For Hobbyists</h2>
      <p class="column-intro">Our planned service: Turn your failed prints and waste filament back into fresh spools with our simple recycling program.</p>
      
      <div class="column-content">
        <div class="info-point">
          <span class="info-icon">‚ôªÔ∏è</span>
          <div>
            <h3>Easy 5-Step Process</h3>
            <p>Separate, package, fill out a form, post it, and get recycled filament back ‚Äî it's that simple.</p>
          </div>
        </div>
        
        <div class="info-point">
          <span class="info-icon">üéØ</span>
          <div>
            <h3>Earn Points on Every Parcel</h3>
            <p>Get rewarded based on weight and plastic type. Points redeemable for recycled filament and discounts.</p>
          </div>
        </div>
        
        <div class="info-point">
          <span class="info-icon">üì¶</span>
          <div>
            <h3>Send Multiple Types at Once</h3>
            <p>Combine PLA, PETG, and more in one shipment ‚Äî just label each material clearly.</p>
          </div>
        </div>
        
        <div class="info-point">
          <span class="info-icon">‚≠ê</span>
          <div>
            <h3>Tier Rewards</h3>
            <p>Frequent and reliable recyclers earn bonus points. The more you send, the more you save!</p>
          </div>
        </div>
      </div>
      
      <a href="{% url 'send_waste' %}" class="column-cta">Learn More About Recycling</a>
    </div>
    
    <!-- Right Column: Commercial -->
    <div class="info-column commercial-column">
      <h2 class="column-title">For Businesses</h2>
      <p class="column-intro">Our planned service: Enterprise solutions for 3D printing companies, makerspaces, and educational institutions looking to turn waste into fresh filament.</p>
      
      <div class="column-content">
        <div class="info-point">
          <span class="info-icon">üí∞</span>
          <div>
            <h3>Cost Savings</h3>
            <p>Reduce waste disposal costs with competitive rates and volume discounts.</p>
          </div>
        </div>
        
        <div class="info-point">
          <span class="info-icon">üåç</span>
          <div>
            <h3>Meet Sustainability Goals</h3>
            <p>Achieve ESG targets with verifiable recycling metrics, full reporting, and certification.</p>
          </div>
        </div>
        
        <div class="info-point">
          <span class="info-icon">üöö</span>
          <div>
            <h3>Scheduled Pickups</h3>
            <p>Convenient collection that fits your workflow. We provide containers and logistics support.</p>
          </div>
        </div>
        
        <div class="info-point">
          <span class="info-icon">üìä</span>
          <div>
            <h3>Transparent Reporting</h3>
            <p>Real-time dashboard showing weights, materials, and environmental impact for stakeholder reports.</p>
          </div>
        </div>
      </div>
      <a href="{% url 'store:business' %}" class="column-cta column-cta-business">Get a Custom Quote</a>
    </div>
    
  </div>
</section>

<!-- Newsletter Signup Section -->
<section class="newsletter-section">
  <div class="newsletter-container">
    <div class="newsletter-content">
      <h2 class="newsletter-title">Subscribe to Our Newsletter</h2>
      <p class="newsletter-subtitle">Get the latest recycling tips, sustainability news, and KnightCycle updates delivered to your inbox.</p>
      
      <form id="newsletterForm" class="newsletter-form">
        {% csrf_token %}
        <div class="newsletter-inputs">
          <input type="text" name="name" placeholder="Your name (optional)" class="newsletter-input">
          <input type="email" name="email" placeholder="Your email address" class="newsletter-input" required>
          <button type="submit" class="newsletter-btn">Subscribe</button>
        </div>
        <div id="newsletterMessage" class="newsletter-message"></div>
      </form>
    </div>
  </div>
</section>

<!-- Blog Preview Section -->
{% if latest_posts %}
<section class="blog-preview-section" style="margin-top: 80px;">
  <div class="blog-preview-container">
    <h2 class="blog-preview-title">Latest from Our Blog</h2>
    <p class="blog-preview-subtitle">Stay updated with recycling tips, sustainability news, and KnightCycle updates</p>
    
    <div class="blog-posts-grid" style="display: flex; gap: 2rem; flex-wrap: wrap; justify-content: center;">
      {% for post in latest_posts %}
      <article class="blog-card" style="flex: 1 1 320px; max-width: 420px; min-width: 280px;">
        {% if post.imageURL %}
        <div class="blog-card-image" style="background-image: url('{{ post.imageURL }}');"></div>
        {% else %}
        <div class="blog-card-image blog-card-placeholder"></div>
        {% endif %}
        <div class="blog-card-content">
          <div class="blog-card-meta">
            <span class="blog-card-date">{{ post.created_at|date:"M d, Y" }}</span>
            <span class="blog-card-author">by {{ post.author.get_full_name|default:post.author.username }}</span>
          </div>
          <h3 class="blog-card-title">{{ post.title }}</h3>
          <p class="blog-card-excerpt">{{ post.excerpt|default:post.content|markdownify|striptags|truncatewords:20 }}</p>
          <a href="{% url 'store:blog_detail' post.slug %}" class="blog-card-link">Read More ‚Üí</a>
        </div>
      </article>
      {% endfor %}
    </div>
    
    <div class="blog-view-all">
      <a href="{% url 'store:blog' %}" class="blog-view-all-btn">View All Blog Posts</a>
    </div>
  </div>
</section>
{% endif %}

<script>
// Newsletter form submission
document.getElementById('newsletterForm').addEventListener('submit', function(e) {
    e.preventDefault();
    
    const form = this;
    const messageEl = document.getElementById('newsletterMessage');
    const btn = form.querySelector('.newsletter-btn');
    const originalBtnText = btn.textContent;
    
    // Disable button and show loading state
    btn.disabled = true;
    btn.textContent = 'Subscribing...';
    messageEl.style.display = 'none';
    messageEl.className = 'newsletter-message';
    messageEl.textContent = '';
    
    // Get form data
    const formData = new FormData(form);
    
    // Send AJAX request
    fetch("{% url 'store:newsletter_signup' %}", {
        method: 'POST',
        body: formData,
        headers: {
            'X-CSRFToken': formData.get('csrfmiddlewaretoken')
        }
    })
    .then(response => response.json())
    .then(data => {
        // Small delay to make the transition more noticeable
        setTimeout(() => {
            // Show message with animation
            messageEl.textContent = data.message;
            messageEl.className = 'newsletter-message ' + (data.success ? 'success' : 'error');
            messageEl.style.display = 'block';  // Explicitly set display to block
            
            // Reset form if successful
            if (data.success) {
                form.reset();
            }
            
            // Re-enable button
            btn.disabled = false;
            btn.textContent = originalBtnText;
            
            // Scroll message into view smoothly
            setTimeout(() => {
                messageEl.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }, 100);
        }, 300);
    })
    .catch(error => {
        setTimeout(() => {
            messageEl.textContent = 'An error occurred. Please try again.';
            messageEl.className = 'newsletter-message error';
            messageEl.style.display = 'block';  // Explicitly set display to block
            btn.disabled = false;
            btn.textContent = originalBtnText;
            messageEl.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }, 300);
    });
});
</script>

{% endblock content %}

