{% extends 'store/main.html' %}
{% block content %}
<div class="profile-container" style="max-width:500px;margin:60px auto;padding:32px 28px;background:#fff;border-radius:10px;box-shadow:0 2px 16px rgba(0,32,16,0.10);">
  <h2 style="color:#116944;text-align:center;font-weight:700;">Profile</h2>
  <p><strong>Username:</strong> {{ user.username }}</p>
  <p><strong>Email:</strong> {{ user.email }}</p>
  <p><strong>Date Joined:</strong> {{ user.date_joined }}</p>
  <p><strong>Last Login:</strong> {{ user.last_login }}</p>

  <a href="{% url 'store:shipping_waste_form' %}" class="btn login-btn" style="margin-top:18px; margin-right:8px;">Ship Waste</a>
  <a href="{% url 'store:logout' %}" class="btn login-btn" style="margin-top:18px;">Logout</a>

  <hr>
  <h3 style="color:#116944;">Shipping Address</h3>
  {% if address_obj %}
    <div style="margin-bottom:12px;">
      <strong>Current:</strong><br>
      {{ address_obj.address }}, {{ address_obj.city }}, {{ address_obj.county }}<br>
      {{ address_obj.postcode }}, {{ address_obj.country }}
    </div>
  {% else %}
    <div style="margin-bottom:12px; color:#b30000;">No address on record.</div>
  {% endif %}
  <form method="post" style="margin-top:10px;">
    {% csrf_token %}
    <input type="text" name="address" placeholder="Address" value="{{ address_obj.address|default:'' }}" required style="width:100%;margin-bottom:8px;">
    <input type="text" name="city" placeholder="City" value="{{ address_obj.city|default:'' }}" required style="width:100%;margin-bottom:8px;">
    <input type="text" name="county" placeholder="County" value="{{ address_obj.county|default:'' }}" style="width:100%;margin-bottom:8px;">
    <input type="text" name="postcode" placeholder="Postcode" value="{{ address_obj.postcode|default:'' }}" required style="width:100%;margin-bottom:8px;">
    <input type="text" name="country" placeholder="Country" value="{{ address_obj.country|default:'' }}" required style="width:100%;margin-bottom:8px;">
    <button type="submit" class="btn login-btn" style="width:100%;margin-top:8px;">Update Address</button>
    {% if message %}<div style="color:#116944;margin-top:8px;text-align:center;">{{ message }}</div>{% endif %}
    {% if error %}<div style="color:#b30000;margin-top:8px;text-align:center;">{{ error }}</div>{% endif %}
  </form>
</div>
{% endblock %}
